
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2018-04-13
 Rendered using Maven Reflow Skin 1.0.0 (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Project Grizzly - Monitoring Overview</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="//netdna.bootstrapcdn.com/bootswatch/2.2.2/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/bootswatch.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/reflow-skin.css" rel="stylesheet" />
		
		<link href="//yandex.st/highlightjs/7.3/styles/solarized_dark.min.css" rel="stylesheet" />
		
		<link href="https://javaee.github.io/grizzly//css/lightbox.css" rel="stylesheet" />
		
		<link href="https://javaee.github.io/grizzly//css/site.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

	</head>

	<body class="page-monitoring project-site" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html">Project <span class="color-brown">Grizzly</span></a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="dependencies.html" title="Download">Download </a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="overview.html" title="Overview">Overview </a></li>
									<li><a href="dependencies.html" title="Dependencies">Dependencies </a></li>
									<li class="dropdown-submenu">
										<a href="hack" title="Core Framework">Core Framework </a>
										<ul class="dropdown-menu">
											<li><a href="memory.html" title="Memory Management">Memory Management </a></li>
											<li><a href="iostrategies.html" title="I/O Strategies">I/O Strategies </a></li>
											<li><a href="transportsconnections.html" title="Transports and Connections">Transports and Connections </a></li>
											<li><a href="filterchainfilters.html" title="FilterChain and Filters">FilterChain and Filters </a></li>
											<li><a href="coreconfig.html" title="Core configuration">Core configuration </a></li>
											<li><a href="portunification.html" title="Port Unification">Port Unification </a></li>
											<li class="active"><a href="" title="Monitoring">Monitoring </a></li>
											<li><a href="extras.html" title="Extras">Extras </a></li>
											<li><a href="bestpractices.html" title="Best Practices">Best Practices </a></li>
											<li><a href="quickstart.html" title="Quick Start">Quick Start </a></li>
											<li><a href="samples.html" title="Samples">Samples </a></li>
										</ul>
									</li>
									<li class="dropdown-submenu">
										<a href="hack" title="HTTP">HTTP </a>
										<ul class="dropdown-menu">
											<li><a href="httpframework.html" title="Core HTTP Framework">Core HTTP Framework </a></li>
											<li><a href="httpserverframework.html" title="HTTP Server Framework">HTTP Server Framework </a></li>
											<li><a href="http2.html" title="HTTP/2">HTTP/2 </a></li>
											<li><a href="httpserverframeworkextras.html" title="HTTP Server Framework Extras">HTTP Server Framework Extras </a></li>
											<li><a href="comet.html" title="Comet">Comet </a></li>
											<li><a href="jaxws.html" title="JAXWS">JAXWS </a></li>
											<li><a href="websockets.html" title="WebSockets">WebSockets </a></li>
											<li><a href="ajp.html" title="AJP">AJP </a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
	<header class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="index.html" id="bannerLeft"><h1><img src="images/grizzlyHead.png"/>&nbsp;<span class="color-black">Project</span> Grizzly</h1></a>
					<p class="lead">NIO Event Development Simplified</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
		<div>
			<ul class="breadcrumb">
				<li class="publishDate version-date">Last Published: 2018-04-13</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<ul id="toc" class="nav">
						<li class="toplevel"><a href="#Monitoring_Overview" title="Monitoring Overview">Monitoring Overview</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#Core_Monitoring_Artifacts" title="Core Monitoring Artifacts">Core Monitoring Artifacts</a></li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#jmx" title="JMX" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">JMX <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#jmx" title="JMX">JMX</a></li>
								<li class="divider"></li>
								<li><a href="#The_core_framework_JMX_monitoring" title="The core framework JMX monitoring:">The core framework JMX monitoring:</a></li>
								<li><a href="#The_HTTP_protocol_JMX_monitoring" title="The HTTP protocol JMX monitoring:">The HTTP protocol JMX monitoring:</a></li>
								<li class="dropdown-submenu">
									<a href="#The_HTTP_server_JMX_monitoring" title="The HTTP server JMX monitoring:">The HTTP server JMX monitoring:</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#JMX_Core_Monitoring_Artifacts" title="JMX Core Monitoring Artifacts">JMX Core Monitoring Artifacts</a></li>

									</ul>
								</li>

							</ul>
						</li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#grizzly_http_jmx_server_monitoring" title="Grizzly HTTP JMX Server Monitoring">Grizzly HTTP JMX Server Monitoring</a></li>
					</ul>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <h2 id="Monitoring_Overview">Monitoring Overview</h2> 
 <p>The ability to provide data of how an application is being used at runtime is an important feature offered by many frameworks. Grizzly 2.3 is no exception. Grizzly provides the ability to monitor key components within the framework and allows this monitoring to be extended by custom authored components. Let’s start by looking at the entities that enable monitoring within Grizzly.</p> 
</div> 
<div class="section"> 
 <h2 id="Core_Monitoring_Artifacts">Core Monitoring Artifacts</h2> 
 <p>At the core of Grizzly monitoring are three simple artifacts in the <i>org.glassfish.grizzly.monitoring package</i>. The first being called <i>MonitoringAware</i> which denotes an entity may be monitored:</p> 
 <div class="source"> 
  <pre>/**
 * General interface for the objects, which could be monitored during the lifecycle.
 */
public interface MonitoringAware&lt;E&gt; {
    /**
     * Return the object associated {@link MonitoringConfig}.
     *
     * @return the object associated {@link MonitoringConfig}.
     */
    MonitoringConfig&lt;E&gt; getMonitoringConfig();
}
</pre> 
 </div> 
 <p>Entities such a <i>MemoryManager</i>, <i>Transport</i>, etc are all <i>MonitoringAware</i>. As seen by the interface definition, all <i>MonitoringAware</i> entities return a <i>MonitoringConfig</i> object with which you can register monitoring probes.</p> 
 <div class="source"> 
  <pre>/**
 * General monitoring configuration interface.
 */
public interface MonitoringConfig&lt;E&gt; {
    /**
     * Add the monitoring probes, which will be notified about object's lifecycle events.
     *
     * @param probes the monitoring probes.
     */
    public void addProbes(E... probes);

    /**
     * Remove the monitoring probes.
     *
     * @param probes the monitoring probes.
     */
    public boolean removeProbes(E... probes);

    /**
     * Get the the monitoring probes, which are registered on the objet.
     * Please note, it's not appropriate to modify the returned array's content.
     * Please use {@link #addProbes(Object[])} and
     * {@link #removeProbes(Object[])} instead.
     *
     * @return the the monitoring probes, which are registered on the object.
     */
    public E[] getProbes();

    /**
     * Removes all the monitoring probes, which are registered on the object.
     */
    public void clearProbes();

    /**
     * Create the JMX {@link Object}, which represents this object.
     * 
     * @return the JMX {@link Object}, which represents this object.
     */
    public Object createManagementObject();
}
</pre> 
 </div> 
 <p>Since <i>MonitoringConfig</i> is really nothing more than a simplified collection plus the <i>createManagementObject()</i> method responsible for returning JMX representation of the object, Grizzly provides a default implementation called <i>org.glassfish.grizzly.monitoring.DefaultMonitoringConfig</i> with <i>null</i> JMX representation. This should be able to satisfied most developer needs.</p> 
 <p>Monitoring probes, as seen in the code example above, can be of any type. Grizzly provides probe interfaces for all MonitoringAware entites within the framework.</p> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <caption>
    Core Module Probes 
  </caption> 
  <tbody> 
   <tr class="odd"> 
    <td align="left">org.glassfish.grizzly.TransportProbe</td> 
    <td align="left">Provides details on events happening within a particular Transport. Such events include when the transport is started, stopped, an error occurring, or if the transport's configuration has been changed.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">org.glassfish.grizzly.ConnectionProbe</td> 
    <td align="left">Provides details on Connections within the framework. This includes both binding of server-side sockets, or inbound connections from clients.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">org.glassfish.grizzly.memory.MemoryProbe</td> 
    <td align="left">Provides buffer allocation (both pooled and non-pooled)/deallocation events.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">org.glassfish.grizzly.threadpool.ThreadPoolProbe</td> 
    <td align="left">Provides details relating to the lifecycle of the threadpool itself as well as that of the threads it manages as well as delegated task information.</td> 
   </tr> 
  </tbody> 
 </table> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <caption>
    Http Module Probes 
  </caption> 
  <tbody> 
   <tr class="odd"> 
    <td align="left">org.glassfish.grizzly.http.HttpProbe</td> 
    <td align="left">Provides details related to the HTTP codec processing itself. Details such as the parsing headers, content chunks, as well as the reverse when content is serialized to the wire.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">org.glassfish.grizzly.http.KeepAliveProbe</td> 
    <td align="left">Provides details pertaining to HTTP keep-alive statistics.</td> 
   </tr> 
  </tbody> 
 </table> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <caption>
    Http Server Module Probes 
  </caption> 
  <tbody> 
   <tr class="odd"> 
    <td align="left">org.glassfish.grizzly.http.server.HttpServerProbe</td> 
    <td align="left">Provides details relating to request processing lifecycles, such as request started, completed, suspended, timed-out, or cancelled.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">org.glassfish.grizzly.http.server.filecache.FileCacheProbe</td> 
    <td align="left">Provides file cache statistics such as a entry being cached, removed from the cache, and cache hits/misses.</td> 
   </tr> 
  </tbody> 
 </table> 
 <div class="page-header">
  <h1 id="jmx">JMX</h1>
 </div> 
 <p>No monitoring would be complete without support form JMX. Given that, Grizzly does provide out-of-the-box support for JMX, however, in order to make our lives easier, we’ve decided to use another open source library called <a class="externalLink" href="http://kenai.com/projects/gmbal/pages/Home">GMBAL</a> (pronounced “gumball”) upon which to build our JMX support. To make our footprint lighter, we separated out JMX related entities and logic into separate modules:</p> 
</div> 
<div class="section"> 
 <h2 id="The_core_framework_JMX_monitoring">The core framework JMX monitoring:</h2> 
 <div class="source"> 
  <pre>&lt;dependency&gt;
    &lt;groupId&gt;org.glassfish.grizzly&lt;/groupId&gt;
    &lt;artifactId&gt;grizzly-framework-monitoring&lt;/artifactId&gt;
    &lt;version&gt;2.4.0&lt;/version&gt;
&lt;/dependency&gt;
</pre> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="The_HTTP_protocol_JMX_monitoring">The HTTP protocol JMX monitoring:</h2> 
 <div class="source"> 
  <pre>&lt;dependency&gt;
    &lt;groupId&gt;org.glassfish.grizzly&lt;/groupId&gt;
    &lt;artifactId&gt;grizzly-http-monitoring&lt;/artifactId&gt;
    &lt;version&gt;2.4.0&lt;/version&gt;
&lt;/dependency&gt;
</pre> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="The_HTTP_server_JMX_monitoring">The HTTP server JMX monitoring:</h2> 
 <div class="source"> 
  <pre>&lt;dependency&gt;
    &lt;groupId&gt;org.glassfish.grizzly&lt;/groupId&gt;
    &lt;artifactId&gt;grizzly-http-server-monitoring&lt;/artifactId&gt;
    &lt;version&gt;2.4.0&lt;/version&gt;
&lt;/dependency&gt;
</pre> 
 </div> 
 <p>If you’re not using maven, you can download the JARs you need for your project from maven central.</p> 
 <div class="section"> 
  <h3 id="JMX_Core_Monitoring_Artifacts">JMX Core Monitoring Artifacts</h3> 
  <p>In order to make a <i>MonitoringAware</i> object JMX compliant <tt>java monitoringAware.getMonitoringConfig().createManagementObject(); </tt> has to return proper non-null JMX representation.</p> 
  <p>If you implement your own <i>MonitoringAware</i> class and want it to be JMX aware - you might want your JMX representation implement JmxObject interface. The JmxObject implementation describes the entity that will be registered with the JMX runtime. The concrete JmxObject implementation typically wraps the Grizzly artifact to be managed. Here is a relatively simple example:</p> 
  <div class="source"> 
   <pre>/**
 * JMX management object for {@link org.glassfish.grizzly.http.KeepAlive}.
 *
 * @since 2.0
 */
@ManagedObject
@Description(&quot;The configuration for HTTP keep-alive connections.&quot;)
public class KeepAlive extends JmxObject {
    /**
     * The {@link org.glassfish.grizzly.http.KeepAlive} being managed.
     */
    private final org.glassfish.grizzly.http.KeepAlive keepAlive;

    /**
     * The number of live keep-alive connections.
     */
    private final AtomicInteger keepAliveConnectionsCount = new AtomicInteger();

    /**
     * The number of requests processed on a keep-alive connections.
     */
    private final AtomicInteger keepAliveHitsCount = new AtomicInteger();

    /**
     * The number of times keep-alive mode was refused.
     */
    private final AtomicInteger keepAliveRefusesCount = new AtomicInteger();

    /**
     * The number of times idle keep-alive connections were closed by timeout.
     */
    private final AtomicInteger keepAliveTimeoutsCount = new AtomicInteger();

    /**
     * The {@link JMXKeepAliveProbe} used to track keep-alive statistics.
     */
    private final JMXKeepAliveProbe keepAliveProbe = new JMXKeepAliveProbe();

    // ------------------------------------------------------------ Constructors


    /**
     * Constructs a new JMX managed KeepAlive for the specified
     * {@link org.glassfish.grizzly.http.KeepAlive} instance.
     *
     * @param keepAlive the {@link org.glassfish.grizzly.http.KeepAlive}
     *  to manage.
     */
    public KeepAlive(org.glassfish.grizzly.http.KeepAlive keepAlive) {
        this.keepAlive = keepAlive;
    }

    // -------------------------------------------------- Methods from JmxObject


    /**
     * {@inheritDoc}
     */
    @Override
    public String getJmxName() {
        return &quot;Keep-Alive&quot;;
    }

    /**
     * &lt;p&gt;
     * {@inheritDoc}
     * &lt;/p&gt;
     *
     * &lt;p&gt;
     * When invoked, this method will add a {@link KeepAliveProbe} to track
     * statistics.
     * &lt;/p&gt;
     */
    @Override
    protected void onRegister(GrizzlyJmxManager mom, GmbalMBean bean) {
        keepAlive.getMonitoringConfig().addProbes(keepAliveProbe);
    }

    /**
     * &lt;p&gt;
     * {@inheritDoc}
     * &lt;/p&gt;
     *
     * &lt;p&gt;
     * When invoked, this method will remove the {@link KeepAliveProbe} added
     * by the {@link #onRegister(GrizzlyJmxManager, GmbalMBean)}
     * call.
     * &lt;/p&gt;
     */
    @Override
    protected void onDeregister(GrizzlyJmxManager mom) {
        keepAlive.getMonitoringConfig().removeProbes(keepAliveProbe);
    }

    // --------------------------------------------------- Keep Alive Properties


    /**
     * @see org.glassfish.grizzly.http.KeepAlive#getIdleTimeoutInSeconds()
     */
    @ManagedAttribute(id=&quot;idle-timeout-seconds&quot;)
    @Description(&quot;The time period keep-alive connection may stay idle&quot;)
    public int getIdleTimeoutInSeconds() {
        return keepAlive.getIdleTimeoutInSeconds();
    }

    /**
     * @see org.glassfish.grizzly.http.KeepAlive#getMaxRequestsCount()
     */
    @ManagedAttribute(id=&quot;max-requests-count&quot;)
    @Description(&quot;the max number of HTTP requests allowed to be processed on one keep-alive connection&quot;)
    public int getMaxRequestsCount() {
        return keepAlive.getMaxRequestsCount();
    }

    /**
     * @return the number live keep-alive connections.
     */
    @ManagedAttribute(id=&quot;live-connections-count&quot;)
    @Description(&quot;The number of live keep-alive connections&quot;)
    public int getConnectionsCount() {
        return keepAliveConnectionsCount.get();
    }

    /**
     * @return the number of requests processed on a keep-alive connections.
     */
    @ManagedAttribute(id=&quot;hits-count&quot;)
    @Description(&quot;The number of requests processed on a keep-alive connections.&quot;)
    public int getHitsCount() {
        return keepAliveHitsCount.get();
    }

    /**
     * @return the number of times keep-alive mode was refused.
     */
    @ManagedAttribute(id=&quot;refuses-count&quot;)
    @Description(&quot;The number of times keep-alive mode was refused.&quot;)
    public int getRefusesCount() {
        return keepAliveRefusesCount.get();
    }

    /**
     * @return the number of times idle keep-alive connections were closed by timeout.
     */
    @ManagedAttribute(id=&quot;timeouts-count&quot;)
    @Description(&quot;The number of times idle keep-alive connections were closed by timeout.&quot;)
    public int getTimeoutsCount() {
        return keepAliveTimeoutsCount.get();
    }

    // ---------------------------------------------------------- Nested Classes


    /**
     * JMX statistic gathering {@link KeepAliveProbe}.
     */
    private final class JMXKeepAliveProbe implements KeepAliveProbe {

        @Override
        public void onConnectionAcceptEvent(Connection connection) {
            keepAliveConnectionsCount.incrementAndGet();
            connection.addCloseListener(new Connection.CloseListener() {

                @Override
                public void onClosed(Closeable closeable) throws IOException {
                    keepAliveConnectionsCount.decrementAndGet();
                }
            });
        }

        @Override
        public void onHitEvent(Connection connection, int requestCounter) {
            keepAliveHitsCount.incrementAndGet();
        }

        @Override
        public void onRefuseEvent(Connection connection) {
            keepAliveRefusesCount.incrementAndGet();
        }

        @Override
        public void onTimeoutEvent(Connection connection) {
            keepAliveTimeoutsCount.incrementAndGet();
        }


        // ----------------------------------------- Methods from KeepAliveProbe


    } // END JMXKeepAliveProbe
}
</pre> 
  </div> 
  <p>There are several things going on here that warrant explanation.</p> 
  <ul> 
   <li> <p>Line 59: Declared as a JMX managed entity via the @ManagedObject annotation from GMBAL. This annotation must be present on the entities to be managed by JMX in order for GMBAL to do its magic.</p></li> 
   <li> <p>Line 102: Constructor taking in an actual org.glassfish.grizzly.http.KeepAlive instance. This is needed as the actual KeepAlive instance has the monitoring config where probes can be registered.</p></li> 
   <li> <p>Line 113: Returns the name to be displayed via JMX.</p></li> 
   <li> <p>Line 128: This callback will be invoked by the GMBAL runtime when this @ManagedObject is registered with JMX. It’s at this point in time that we register the probe implementation (starting at line 208) with the KeepAlive instance’s <i>JmxMonitoringConfig</i>.</p></li> 
   <li> <p>Line 144: This callback will be invoked by the GMBAL runtime when this @ManagedObject is de-registered with JMX. It’s at this point in time that we remove the probe implementation (starting at line 208) with the KeepAlive instance’s <i>JxmMonintoringConfig</i>.</p></li> 
   <li> <p>Lines 151-203: These define @ManagedAttributes along with their descriptions which will be exposed via JMX.</p></li> 
  </ul> 
  <p>Using the example JmxObject implementation above, the org.glassfish.grizzly.http.KeepAlive.createManagementObject() is simple:</p> 
  <div class="source"> 
   <pre>protected Object createManagementObject() {
    return new org.glassfish.grizzly.http.jmx.KeepAlive(this);
}
</pre> 
  </div> 
  <p>The final piece here is how to actually hook into the JMX runtime. It’s easy!</p> 
  <div class="source"> 
   <pre>public static void main(String[] args) {

        final GrizzlyJmxManager manager = GrizzlyJmxManager.instance();
        final TCPNIOTransport transport1 = TCPNIOTransportBuilder.newInstance().build();
        final TCPNIOTransport transport2 = TCPNIOTransportBuilder.newInstance().build();
        try {
            Object jmxTransportObject1 =
                    transport1.getMonitoringConfig().createManagementObject();

            Object jmxTransportObject2 =
                    transport2.getMonitoringConfig().createManagementObject();

            manager.registerAtRoot(jmxTransportObject1, &quot;Transport1&quot;);
            manager.registerAtRoot(jmxTransportObject2, &quot;Transport2&quot;);
            transport1.start();
            transport1.bind(9999);
            System.out.println(&quot;Press any key to stop the example...&quot;);
            System.in.read();
        } catch (IOException ioe) {
            ioe.printStackTrace();
            System.exit(1);
        } finally {
            try {
                transport1.shutdownNow();
            } catch (IOException ignored) {}
        }
}
</pre> 
  </div> 
  <p>Once running, you can connect to the process via JConsole and inspect the results (e.g., see that Transport1 is started while Transport2 is stopped).</p> 
  <h1 id="grizzly_http_jmx_server_monitoring">Grizzly HTTP JMX Server Monitoring</h1> 
  <p>If you’re using Grizzly's HttpServer, enabling monitoring is very simple:</p> 
  <div class="source"> 
   <pre>public static void main(String[] args) {

        HttpServer gws = new HttpServer();
        HttpServer gws1 = new HttpServer();
        NetworkListener listener1 = new NetworkListener(&quot;listener1&quot;, &quot;localhost&quot;, 19080);
        NetworkListener listener2 = new NetworkListener(&quot;listener2&quot;, &quot;localhost&quot;, 19081);
        gws.addListener(listener1);
        gws1.addListener(listener2);

        try {
            gws.start();
            gws1.start();
            gws.getServerConfiguration().setJmxEnabled(true);
            gws1.getServerConfiguration().setJmxEnabled(true);
            assertTrue(true);
        } catch (IOException ioe) {
            ioe.printStackTrace();
            System.exit(1);
        } finally {
            try {
                gws.shutdownNow();
                gws1.shutdownNow();
            } catch (IOException ignored) {}
        }
}
</pre> 
  </div> 
  <p>Notice that enabling or disabling JMX support is dynamic - no need to restart the server instances.</p> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li>
							<a href="index.html" title="Home">Home </a>
						</li>
						<li>
							<a href="license.html" title="License">License </a>
						</li>
						<li>
							<a href="using.html" title="Who's Using Grizzly">Who's Using Grizzly </a>
						</li>
						<li class="nav-header">Download</li>
						<li>
							<a href="dependencies.html" title="Download">Download </a>
						</li>
					</ul>
				</div>
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li>
							<a href="contribute.html" title="Contribute">Contribute </a>
						</li>
						<li>
							<a href="http://stackoverflow.com/questions/tagged/grizzly" title="StackOverflow" class="externalLink">StackOverflow </a>
						</li>
						<li>
							<a href="https://twitter.com/project_grizzly" title="Twitter" class="externalLink">Twitter </a>
						</li>
						<li>
							<a href="mailing.html" title="Mailing Lists">Mailing Lists </a>
						</li>
					</ul>
				</div>
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
				<div class="span0 bottom-description">
					<blockquote><p>
                        YourKit is kindly supporting open source projects with its full-featured Java Profiler.
                        <a href="http://www.yourkit.com/java/profiler/index.jsp">YourKit Java Profiler</a>
                        </p>
                        <hr/>
                        <p>
                        <a href="http://www.jetbrains.com/idea/" style="position: relative;display:block; width:120px; height:30px; border:0; margin:0;padding:0;text-decoration:none;text-indent:0;"><span style="margin: 0;padding: 0;position: absolute;top: -1px;left: 29px;font-size: 9px;cursor:pointer;  background-image:none;border:0;color: #acc4f9; font-family: trebuchet ms,arial,sans-serif;font-weight: normal;text-align:left;"></span><img src="images/logo-text.png" alt="The best Java IDE" border="0"/></a>
                        </p>
            <div id="archive-footer">This project is now part of the <a href="https://projects.eclipse.org/projects/ee4j">EE4J</a> initiative; its activity is temporarily paused until it has been effectively transferred to the Eclipse Foundation.<br/>See <a href="https://www.eclipse.org/ee4j/status.php">here</a> for the EE4J transition status.
</div></blockquote>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2018. All Rights Reserved.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='https://javaee.github.io/grizzly//js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<script src="https://javaee.github.io/grizzly//js/lightbox.js"></script>
	<script src="https://javaee.github.io/grizzly//js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="https://javaee.github.io/grizzly//js/jquery.ba-bbq.min.js"></script>
	<script src="//yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="https://javaee.github.io/grizzly//js/reflow-skin.js"></script>
	
	</body>
</html>

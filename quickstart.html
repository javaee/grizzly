
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2021-03-19
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Project Grizzly - Quick Start</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="//netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/bootswatch.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/reflow-skin.css" rel="stylesheet" />

		<link href="//yandex.st/highlightjs/7.5/styles/solarized_dark.min.css" rel="stylesheet" />

		<link href="https://javaee.github.io/grizzly//css/lightbox.css" rel="stylesheet" />

		<link href="https://javaee.github.io/grizzly//css/site.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-quickstart project-site" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html">Project <span class="color-brown">Grizzly</span></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="dependencies.html" title="Download">Download</a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="overview.html" title="Overview">Overview</a></li>
									<li ><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
									<li class="dropdown-submenu ">
										<a href="hack" title="Core Framework">Core Framework</a>
										<ul class="dropdown-menu">
											<li ><a href="memory.html" title="Memory Management">Memory Management</a></li>
											<li ><a href="iostrategies.html" title="I/O Strategies">I/O Strategies</a></li>
											<li ><a href="transportsconnections.html" title="Transports and Connections">Transports and Connections</a></li>
											<li ><a href="filterchainfilters.html" title="FilterChain and Filters">FilterChain and Filters</a></li>
											<li ><a href="coreconfig.html" title="Core configuration">Core configuration</a></li>
											<li ><a href="portunification.html" title="Port Unification">Port Unification</a></li>
											<li ><a href="monitoring.html" title="Monitoring">Monitoring</a></li>
											<li ><a href="extras.html" title="Extras">Extras</a></li>
											<li ><a href="bestpractices.html" title="Best Practices">Best Practices</a></li>
											<li class="active"><a href="" title="Quick Start">Quick Start</a></li>
											<li ><a href="samples.html" title="Samples">Samples</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="hack" title="HTTP">HTTP</a>
										<ul class="dropdown-menu">
											<li ><a href="httpframework.html" title="Core HTTP Framework">Core HTTP Framework</a></li>
											<li ><a href="httpserverframework.html" title="HTTP Server Framework">HTTP Server Framework</a></li>
											<li ><a href="http2.html" title="HTTP/2">HTTP/2</a></li>
											<li ><a href="httpserverframeworkextras.html" title="HTTP Server Framework Extras">HTTP Server Framework Extras</a></li>
											<li ><a href="comet.html" title="Comet">Comet</a></li>
											<li ><a href="jaxws.html" title="JAXWS">JAXWS</a></li>
											<li ><a href="websockets.html" title="WebSockets">WebSockets</a></li>
											<li ><a href="ajp.html" title="AJP">AJP</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="index.html" id="bannerLeft"><h1><img src="images/grizzlyHead.png"/>&nbsp;<span class="color-black">Project</span> Grizzly</h1></a>
					<p class="lead">NIO Event Development Simplified</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li class="publishDate version-date">Last Published: 2021-03-19</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="toplevel"><a href="#Quick_Start" title="Quick Start">Quick Start</a></li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#Server" title="Server" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Server <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Server" title="Server">Server</a></li>
								<li class="divider"></li>
								<li><a href="#Create_echo_filter" title="Create echo filter">Create echo filter</a></li>
								<li><a href="#Server_initialization_code" title="Server initialization code">Server initialization code</a></li>
								<li><a href="#Running_echo_server" title="Running echo server">Running echo server</a></li>

							</ul>
						</li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#Client" title="Client" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Client <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Client" title="Client">Client</a></li>
								<li class="divider"></li>
								<li><a href="#Create_client_filter" title="Create client filter">Create client filter</a></li>
								<li><a href="#Client_initialization_code" title="Client initialization code">Client initialization code</a></li>
								<li><a href="#Adding_user_interaction_and_client_shutdown_code" title="Adding user interaction and client shutdown code">Adding user interaction and client shutdown code</a></li>
								<li><a href="#Running_echo_client" title="Running echo client">Running echo client</a></li>

							</ul>
						</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Quick_Start">Quick Start</h2>
 </div> 
 <p>This chapter will present how to get started with Grizzly 2.3, both client and server side.</p> 
 <p>First, it is necessary to depend on the correct Grizzly 2.3 <a class="externalLink" href="https://maven.java.net/content/repositories/releases/org/glassfish/grizzly/grizzly-framework/">core</a> artifact. Maven developers will need to add following dependency to the pom:</p> 
 <div class="source"> 
  <pre>&lt;dependency&gt;
    &lt;groupId&gt;org.glassfish.grizzly&lt;/groupId&gt;
    &lt;artifactId&gt;grizzly-framework&lt;/artifactId&gt;
    &lt;version&gt;2.4.0&lt;/version&gt;
&lt;/dependency&gt;
</pre> 
 </div> 
 <p>All Grizzly maven artifacts are deployed on the <a class="externalLink" href="http://repo1.maven.org/">Maven Central</a> repository.</p> 
 <p>Let’s implement simple Echo client-server application. The client will get user’s data from standard input, send data to Echo server and redirect server’s response to the standard output. The responsibility of the Echo server is to read data from network channel and echo the same data back to the channel.</p> 
</div> 
<div class="section"> 
 <h2 id="Server">Server</h2> 
 <div class="section"> 
  <h3 id="Create_echo_filter">Create echo filter</h3> 
  <p>First of all let’s implement echo filter, which will echo the received message (despite its type) back to the Grizzly Connection.</p> 
  <div class="source"> 
   <pre>import java.io.IOException;
import org.glassfish.grizzly.filterchain.BaseFilter;
import org.glassfish.grizzly.filterchain.FilterChain;
import org.glassfish.grizzly.filterchain.FilterChainContext;
import org.glassfish.grizzly.filterchain.NextAction;

/**
 * Implementation of {@link FilterChain} filter, which replies with the request
 * message.
 */
public class EchoFilter extends BaseFilter {

    /**
     * Handle just read operation, when some message has come and ready to be
     * processed.
     *
     * @param ctx Context of {@link FilterChainContext} processing
     * @return the next action
     * @throws java.io.IOException
     */
    @Override
    public NextAction handleRead(FilterChainContext ctx)
            throws IOException {
        // Peer address is used for non-connected UDP Connection :)
        final Object peerAddress = ctx.getAddress();

        final Object message = ctx.getMessage();

        ctx.write(peerAddress, message, null);

        return ctx.getStopAction();
    }
}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Server_initialization_code">Server initialization code</h3> 
  <p>All the server FilterChain bricks are ready - let’s initialize and start the server.</p> 
  <div class="source"> 
   <pre>import java.io.IOException;
import java.nio.charset.Charset;
import java.util.logging.Logger;
import org.glassfish.grizzly.filterchain.FilterChainBuilder;
import org.glassfish.grizzly.filterchain.TransportFilter;
import org.glassfish.grizzly.nio.transport.TCPNIOTransport;
import org.glassfish.grizzly.nio.transport.TCPNIOTransportBuilder;
import org.glassfish.grizzly.utils.StringFilter;

/**
 * Class initializes and starts the echo server, based on Grizzly 2.3
 */
public class EchoServer {
    private static final Logger logger = Logger.getLogger(EchoServer.class.getName());

    public static final String HOST = &quot;localhost&quot;;
    public static final int PORT = 7777;

    public static void main(String[] args) throws IOException {
        // Create a FilterChain using FilterChainBuilder
        FilterChainBuilder filterChainBuilder = FilterChainBuilder.stateless();

        // Add TransportFilter, which is responsible
        // for reading and writing data to the connection
        filterChainBuilder.add(new TransportFilter());

        // StringFilter is responsible for Buffer &lt;-&gt; String conversion
        filterChainBuilder.add(new StringFilter(Charset.forName(&quot;UTF-8&quot;)));

        // EchoFilter is responsible for echoing received messages
        filterChainBuilder.add(new EchoFilter());

        // Create TCP transport
        final TCPNIOTransport transport =
                TCPNIOTransportBuilder.newInstance().build();

        transport.setProcessor(filterChainBuilder.build());
        try {
            // binding transport to start listen on certain host and port
            transport.bind(HOST, PORT);

            // start the transport
            transport.start();

            logger.info(&quot;Press any key to stop the server...&quot;);
            System.in.read();
        } finally {
            logger.info(&quot;Stopping transport...&quot;);
            // stop the transport
            transport.shutdownNow();

            logger.info(&quot;Stopped transport...&quot;);
        }
    }
}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Running_echo_server">Running echo server</h3> 
  <p>As we see in the code above, EchoServer class declares main method, so it could be easily run from command line like:</p> 
  <div class="source"> 
   <pre>java -classpath grizzly-framework.jar EchoServer
</pre> 
  </div> 
  <p>or using your favorite IDE.</p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Client">Client</h2> 
 <div class="section"> 
  <h3 id="Create_client_filter">Create client filter</h3> 
  <p>Client filter is responsible for redirecting server response to the standard output. Please note, the ClientFilter requires FilterChainContext messages to be java.lang.String (line 21), so it relies StringFilter is preceding it in the FilterChain.</p> 
  <div class="source"> 
   <pre>import java.io.IOException;
import org.glassfish.grizzly.filterchain.BaseFilter;
import org.glassfish.grizzly.filterchain.FilterChainContext;
import org.glassfish.grizzly.filterchain.NextAction;

/**
 * Client filter is responsible for redirecting server response to the standard output
 */
public class ClientFilter extends BaseFilter {
    /**
     * Handle just read operation, when some message has come and ready to be
     * processed.
     *
     * @param ctx Context of {@link FilterChainContext} processing
     * @return the next action
     * @throws java.io.IOException
     */
    @Override
    public NextAction handleRead(final FilterChainContext ctx) throws IOException {
        // We get String message from the context, because we rely prev. Filter in chain is StringFilter
        final String serverResponse = ctx.getMessage();
        System.out.println(&quot;Server echo: &quot; + serverResponse);

        return ctx.getStopAction();
    }
}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Client_initialization_code">Client initialization code</h3> 
  <p>Now we’re ready to initialize the client, which includes FilterChain and Transport initialization</p> 
  <div class="source"> 
   <pre>Connection connection = null;

// Create a FilterChain using FilterChainBuilder
FilterChainBuilder filterChainBuilder = FilterChainBuilder.stateless();

// Add TransportFilter, which is responsible
// for reading and writing data to the connection
filterChainBuilder.add(new TransportFilter());

// StringFilter is responsible for Buffer &lt;-&gt; String conversion
filterChainBuilder.add(new StringFilter(Charset.forName(&quot;UTF-8&quot;)));

// ClientFilter is responsible for redirecting server responses to the standard output
filterChainBuilder.add(new ClientFilter());

// Create TCP transport
final TCPNIOTransport transport =
        TCPNIOTransportBuilder.newInstance().build();
transport.setProcessor(filterChainBuilder.build());
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Adding_user_interaction_and_client_shutdown_code">Adding user interaction and client shutdown code</h3> 
  <p>Let’s complete the code above by adding the logic, which reads user data from the standard input, sends it to the server and client shutdown being executed on end of input.</p> 
  <div class="source"> 
   <pre>import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.nio.charset.Charset;
import java.util.logging.Logger;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;
import org.glassfish.grizzly.Connection;
import org.glassfish.grizzly.Grizzly;
import org.glassfish.grizzly.filterchain.FilterChainBuilder;
import org.glassfish.grizzly.filterchain.TransportFilter;
import org.glassfish.grizzly.nio.transport.TCPNIOTransport;
import org.glassfish.grizzly.nio.transport.TCPNIOTransportBuilder;
import org.glassfish.grizzly.utils.StringFilter;

/**
 * The simple client, which sends a message to the echo server
 * and waits for response
 */
public class EchoClient {
    private static final Logger logger = Grizzly.logger(EchoClient.class);

    public static void main(String[] args) throws IOException,
            ExecutionException, InterruptedException, TimeoutException {

        Connection connection = null;

        // Create a FilterChain using FilterChainBuilder
        FilterChainBuilder filterChainBuilder = FilterChainBuilder.stateless();
        // Add TransportFilter, which is responsible
        // for reading and writing data to the connection
        filterChainBuilder.add(new TransportFilter());
        // StringFilter is responsible for Buffer &lt;-&gt; String conversion
        filterChainBuilder.add(new StringFilter(Charset.forName(&quot;UTF-8&quot;)));
        // ClientFilter is responsible for redirecting server responses to the standard output
        filterChainBuilder.add(new ClientFilter());

        // Create TCP transport
        final TCPNIOTransport transport =
                TCPNIOTransportBuilder.newInstance().build();
        transport.setProcessor(filterChainBuilder.build());

        try {
            // start the transport
            transport.start();

            // perform async. connect to the server
            Future&lt;Connection&gt; future = transport.connect(EchoServer.HOST,
                    EchoServer.PORT);
            // wait for connect operation to complete
            connection = future.get(10, TimeUnit.SECONDS);

            assert connection != null;

            System.out.println(&quot;Ready... (\&quot;q\&quot; to exit)&quot;);
            final BufferedReader inReader = new BufferedReader(new InputStreamReader(System.in));
            do {
                final String userInput = inReader.readLine();
                if (userInput == null || &quot;q&quot;.equals(userInput)) {
                    break;
                }

                connection.write(userInput);
            } while (true);
        } finally {
            // close the client connection
            if (connection != null) {
                connection.close();
            }

            // stop the transport
            transport.shutdownNow();
        }
    }
}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Running_echo_client">Running echo client</h3> 
  <p>EchoClient could be run easily using command line like</p> 
  <div class="source"> 
   <pre>java -classpath grizzly-framework.jar EchoClient
</pre> 
  </div> 
  <p>or your favorite IDE.</p> 
  <p>By default, if standard input and output were not changed - you’ll see the following on the console:</p> 
  <div class="source"> 
   <pre>Ready... (&quot;q&quot; to exit)
</pre> 
  </div> 
  <p>Now the client is ready for your input. Each time you typed a line and pressed &lt;ENTER&gt; - the line will be sent to the server and response got:</p> 
  <div class="source"> 
   <pre>Ready... (&quot;q&quot; to exit)
Hey there!
Server echo: Hey there!
</pre> 
  </div> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="index.html" title="Home">Home</a>
						</li>
						<li >
							<a href="license.html" title="License">License</a>
						</li>
						<li >
							<a href="using.html" title="Who's Using Grizzly">Who's Using Grizzly</a>
						</li>
						<li class="nav-header">Download</li>
						<li >
							<a href="dependencies.html" title="Download">Download</a>
						</li>
					</ul>
				</div>
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li >
							<a href="contribute.html" title="Contribute">Contribute</a>
						</li>
						<li >
							<a href="http://stackoverflow.com/questions/tagged/grizzly" title="StackOverflow" class="externalLink">StackOverflow</a>
						</li>
						<li >
							<a href="mailing.html" title="Mailing Lists">Mailing Lists</a>
						</li>
					</ul>
				</div>
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
				<div class="span0 bottom-description">
					<blockquote><div id="archive-footer" style="left: 0px;">This project is now part of the <a href="https://projects.eclipse.org/projects/ee4j">Jakarta EE Working Group</a> and has been transferred to the Eclipse Foundation.<br/>Please visit <a href="https://projects.eclipse.org/projects/ee4j.grizzly">Eclipse Grizzly</a> for all the latest developments (or the new <a href="https://github.com/eclipse-ee4j/grizzly">GitHub Repo</a>).
		</div>
						<p>
                        <a href="http://www.jetbrains.com/idea/" style="position: relative;display:block; width:120px; height:30px; border:0; margin:0;padding:0;text-decoration:none;text-indent:0;"><span style="margin: 0;padding: 0;position: absolute;top: -1px;left: 29px;font-size: 9px;cursor:pointer;  background-image:none;border:0;color: #acc4f9; font-family: trebuchet ms,arial,sans-serif;font-weight: normal;text-align:left;"></span><img src="images/logo-text.png" alt="The best Java IDE" border="0"/></a>
                        </p></blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2013-2021. All Rights Reserved.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="https://javaee.github.io/grizzly//js/lightbox.min.js"></script>
	<script src="https://javaee.github.io/grizzly//js/reflow-scroll.js"></script>
	<script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="https://javaee.github.io/grizzly//js/reflow-skin.js"></script>

	</body>
</html>

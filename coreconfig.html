
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2021-03-19
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Project Grizzly - Core Configuration</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="//netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/bootswatch.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/reflow-skin.css" rel="stylesheet" />

		<link href="//yandex.st/highlightjs/7.5/styles/solarized_dark.min.css" rel="stylesheet" />

		<link href="https://javaee.github.io/grizzly//css/lightbox.css" rel="stylesheet" />

		<link href="https://javaee.github.io/grizzly//css/site.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-coreconfig project-site" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html">Project <span class="color-brown">Grizzly</span></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="dependencies.html" title="Download">Download</a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="overview.html" title="Overview">Overview</a></li>
									<li ><a href="dependencies.html" title="Dependencies">Dependencies</a></li>
									<li class="dropdown-submenu ">
										<a href="hack" title="Core Framework">Core Framework</a>
										<ul class="dropdown-menu">
											<li ><a href="memory.html" title="Memory Management">Memory Management</a></li>
											<li ><a href="iostrategies.html" title="I/O Strategies">I/O Strategies</a></li>
											<li ><a href="transportsconnections.html" title="Transports and Connections">Transports and Connections</a></li>
											<li ><a href="filterchainfilters.html" title="FilterChain and Filters">FilterChain and Filters</a></li>
											<li class="active"><a href="" title="Core configuration">Core configuration</a></li>
											<li ><a href="portunification.html" title="Port Unification">Port Unification</a></li>
											<li ><a href="monitoring.html" title="Monitoring">Monitoring</a></li>
											<li ><a href="extras.html" title="Extras">Extras</a></li>
											<li ><a href="bestpractices.html" title="Best Practices">Best Practices</a></li>
											<li ><a href="quickstart.html" title="Quick Start">Quick Start</a></li>
											<li ><a href="samples.html" title="Samples">Samples</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="hack" title="HTTP">HTTP</a>
										<ul class="dropdown-menu">
											<li ><a href="httpframework.html" title="Core HTTP Framework">Core HTTP Framework</a></li>
											<li ><a href="httpserverframework.html" title="HTTP Server Framework">HTTP Server Framework</a></li>
											<li ><a href="http2.html" title="HTTP/2">HTTP/2</a></li>
											<li ><a href="httpserverframeworkextras.html" title="HTTP Server Framework Extras">HTTP Server Framework Extras</a></li>
											<li ><a href="comet.html" title="Comet">Comet</a></li>
											<li ><a href="jaxws.html" title="JAXWS">JAXWS</a></li>
											<li ><a href="websockets.html" title="WebSockets">WebSockets</a></li>
											<li ><a href="ajp.html" title="AJP">AJP</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="index.html" id="bannerLeft"><h1><img src="images/grizzlyHead.png"/>&nbsp;<span class="color-black">Project</span> Grizzly</h1></a>
					<p class="lead">NIO Event Development Simplified</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li class="publishDate version-date">Last Published: 2021-03-19</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="toplevel"><a href="#Core_Configuration" title="Core Configuration">Core Configuration</a></li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#Transport_Configuration" title="Transport Configuration">Transport Configuration</a></li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#Thread_Pool_Configuration" title="Thread Pool Configuration" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Thread Pool Configuration <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Thread_Pool_Configuration" title="Thread Pool Configuration">Thread Pool Configuration</a></li>
								<li class="divider"></li>
								<li><a href="#FixedThreadPool" title="FixedThreadPool">FixedThreadPool</a></li>
								<li><a href="#QueueLimitedThreadPool" title="QueueLimitedThreadPool">QueueLimitedThreadPool</a></li>
								<li><a href="#SyncThreadPool" title="SyncThreadPool">SyncThreadPool</a></li>

							</ul>
						</li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#Examples" title="Examples">Examples</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Core_Configuration">Core Configuration</h2>
 </div> 
 <p>The primary points of configuration of the core framework are that of the Transport instances and their associated thread pools. The ability to configure both entities is possible via the NIOTransportBuilder.</p> 
</div> 
<div class="section"> 
 <h2 id="Transport_Configuration">Transport Configuration</h2> 
 <p>Just as there are concrete NIOTransport implementations for TCP and UDP, so too are there two concrete NIOTransportBuilder implementations. Each NIOTransportBuilder implementation exposes configurable features unique to each transport. The following describes configuration properties common to all NIOTransports and then describes the properties for the TCP and UDP NIOTransport implementations.</p> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <caption>
    NIOTransportBuilder Properties 
  </caption> 
  <tbody> 
   <tr class="odd"> 
    <td align="left">workerThreadPoolConfig</td> 
    <td align="left">This property exposes a ThreadPoolConfig instance that allows configuration of the worker thread pool used by the transport that will be constructed by this builder. Note: depending on the IOStrategy being used, this value may be null.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">selectorThreadPoolConfig</td> 
    <td align="left">This propery exposes a ThreadPoolConfig instance that allows configuration of the selector/kernel thread pool used by the transport that will be constructed by this builder.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">IOStrategy</td> 
    <td align="left">Sets the IOStrategy that will be used by this transport. Note that changing this value before the transport has been started may have an impact on the return value of the workerThreadPoolConfig property. If no value is explicitly set, the WorkerThreadIOStrategy will be employed. See the section on <a href="iostrategies.html">IOStrategies</a> for specifics on each concrete IOStrategy included with Grizzly 2.3</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">memoryManager</td> 
    <td align="left">Sets the MemoryManager to be used by this transport. If no value is explicitly set, the MemoryManager used will be the NIOTransportBuilder.DEFAULT_MEMORY_MANAGER. See the section on <a href="memory.html">Memory Management</a> for specifics on the MemoryManager system.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">selectorHandler</td> 
    <td align="left">Sets the SelectorHandler to be used by this transport. If no value is explicitly set, the SelectorHandler used wil be the NIOTransportBuilder.DEFAULT_SELECTOR_HANDLER. See the section on <a href="transportsconnections.html">Transports and Connections</a> for specifics on the SelectorHandler.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">selectionKeyHandler</td> 
    <td align="left">Sets the SelectionKeyHandler to be used by this transport. If no value is explicitly set, the SelectionKeyHandler used will be the NIOTransportBuilder.DEFAULT_SELECTION_KEY_HANDLER. See the section on <a href="transportsconnections.html">Transports and Connections</a> for specifics on the SelectionKeyHandler.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">attributeBuilder</td> 
    <td align="left">Sets the AttributeBuilder to be used by this transport. If no value is explicitly set, the AttributeBuilder used will be the NIOTransportBuilder.DEFAULT_ATTRIBUTE_BUILDER.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">NIOChannelDistributor</td> 
    <td align="left">Sets the NIOChannelDistributor used by this transport. See the section on <a href="transportsconnections.html">Transports and Connections</a> for specifics on the NIOChannelDistributor.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">processor</td> 
    <td align="left">Sets the Processor used by this transport.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">processorSelector</td> 
    <td align="left">Sets the ProcessorSelector used by this transport.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">readBufferSize</td> 
    <td align="left">Sets the size of the Buffer that will be allocated, per-connection, to read incoming data.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">writeBuffersSize</td> 
    <td align="left">Sets the size of the Buffer that will be applicated, per-connection, to write outgoing data.</td> 
   </tr> 
  </tbody> 
 </table> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <caption>
    TCPNIOTransportBuilder Properties 
  </caption> 
  <tbody> 
   <tr class="odd"> 
    <td align="left">clientSocketSoTimeout</td> 
    <td align="left">Enable/disable SO_TIMEOUT with the specified timeout, in milliseconds (client mode).</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">connectionTimeout</td> 
    <td align="left">Time in milliseconds for how long establishing a connection can take before the operation times out.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">keepAlive</td> 
    <td align="left">Enable/disable SO_KEEPALIVE.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">linger</td> 
    <td align="left">Enable/disable SO_LINGER with the specified linger time in seconds. The maximum timeout value is platform specific. The setting only affects socket close.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">reuseAddress</td> 
    <td align="left">Enable/disable the SO_REUSEADDR socket option. When a TCP connection is closed the connection may remain in a timeout state for a period of time after the connection is closed (typically known as the TIME_WAIT state or 2MSL wait state). For applications using a well known socket address or port it may not be possible to bind a socket to the required SocketAddress if there is a connection in the timeout state involving the socket address or port.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">serverConnectionBacklog</td> 
    <td align="left">Specifies the maximum pending connection queue length.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">serverSocketSoTimeout</td> 
    <td align="left">Enable/disable SO_TIMEOUT with the specified timeout, in milliseconds (server mode).</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">tcpNoDelay</td> 
    <td align="left">Enable/disable TCP_NODELAY (disable/enable Nagle's algorithm).</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">temporarySelectorIO</td> 
    <td align="left">Allows the specification of a TemporarySelectorIO instance to aid in the simulation of blocking IO.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">optimizedForMultiplexing</td> 
    <td align="left">Controls the behavior of writing to a connection. If enabled, then all writes regardless if the current thread can write directly to the connection or not, will be passed to the async write queue. When the write actually occurs, the transport will attempt to write as much content from the write queue as possible. This option is disabled by default.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">maxAsyncWriteQueueSizeInBytes</td> 
    <td align="left">Specifies the size, in bytes, of the async write queue on a per-connection basis. If not specified, the value will be configured to be four times the size of the system's socket write buffer size. Setting this value to -1 will allow the queue to be unbounded.</td> 
   </tr> 
  </tbody> 
 </table> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <caption>
    UDPNIOTransportBuilder Properties 
  </caption> 
  <tbody> 
   <tr class="odd"> 
    <td align="left">connectionTimeout</td> 
    <td align="left">Time in milliseconds for how long establishing a connection can take before the operation times out.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">reuseAddress</td> 
    <td align="left">Enable/disable the SO_REUSEADDR socket option. When a TCP connection is closed the connection may remain in a timeout state for a period of time after the connection is closed (typically known as the TIME_WAIT state or 2MSL wait state). For applications using a well known socket address or port it may not be possible to bind a socket to the required SocketAddress if there is a connection in the timeout state involving the socket address or port.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">temporarySelectorIO</td> 
    <td align="left">Allows the specification of a TemporarySelectorIO instance to aid in the simulation of blocking IO.</td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<div class="section"> 
 <h2 id="Thread_Pool_Configuration">Thread Pool Configuration</h2> 
 <p>Grizzly’s thread pool configuration is managed by the ThreadPoolConfig object:</p> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <caption>
    ThreadPoolConfig Properties 
  </caption> 
  <tbody> 
   <tr class="odd"> 
    <td align="left">queue</td> 
    <td align="left">The task Queue implementation to be used.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">queueLimit</td> 
    <td align="left">The maximum number of pending tasks that may be queued.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">threadFactory</td> 
    <td align="left">The ThreadFactory that the pool will use to create new Threads.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">poolName</td> 
    <td align="left">The name of this thread pool.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">priority</td> 
    <td align="left">The priority to be assigned to each thread. This will override any priority assigned by the specified ThreadFactory.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">corePoolSize</td> 
    <td align="left">The initial number of threads that will be present with the thread pool is created.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">maxPoolSize</td> 
    <td align="left">The maximum number threads that may be maintained by this thread pool.</td> 
   </tr> 
   <tr class="even"> 
    <td align="left">keepAliveTime</td> 
    <td align="left">The maximum time a thread may stay idle and wait for a new task to execute before it will be released. Custom time units can be used.</td> 
   </tr> 
   <tr class="odd"> 
    <td align="left">transactionTimeout</td> 
    <td align="left">The maximum time a thread may be allowed to run a single task before interrupt signal will be sent. Custom time units can be used.</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>The thread pool configuration is fairly straight forward. However, it should be noted that Grizzly, internally, has several thread pool implementations: SyncThreadPool, FixedThreadPool, and QueueLimitedThreadPool. Which implementation is chosen is based on the configuration. The following sections describe each of the thread pool implementations.</p> 
 <div class="section"> 
  <h3 id="FixedThreadPool">FixedThreadPool</h3> 
  <p>This pool will be selected when the queueLimit property is less than zero, and the max and core pool sizes are the same. The FixedThreadPool has no synchronization when executing tasks, so it offers better performance.</p> 
 </div> 
 <div class="section"> 
  <h3 id="QueueLimitedThreadPool">QueueLimitedThreadPool</h3> 
  <p>This pool will be selected when the queueLimit property is greater than zero, and the max and core pool sizes are the same. The QueueLimitedThreadPool is an extension of the FixedThreadPool, so if offers the same benefits of the FixedThreadPool without having an unbounded task queue.</p> 
 </div> 
 <div class="section"> 
  <h3 id="SyncThreadPool">SyncThreadPool</h3> 
  <p>This pool will be selected when none of the criteria for the other thread pools apply. This thread pool does have synchronization to have precise control over the decision of thread creation.</p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Examples">Examples</h2> 
 <p>Here are some examples of using the TCPNIOTransportBuilder to configure the Transport and/or thread pool.</p> 
 <div class="source"> 
  <pre>final TCPNIOTransportBuilder builder = TCPNIOTransportBuilder.newInstance();
final TCPNIOTransport transport = builder.build();
</pre> 
 </div> 
 <p>Creates a new TCPNIOTransport using all default configuration values.</p> 
 <div class="source"> 
  <pre>final TCPNIOTransportBuilder builder = TCPNIOTransportBuilder.newInstance();
final TCPNIOTransport transport = builder.setIOStrategy(SameThreadIOStrategy.getInstance()).setTcpNoDelay(true).build();
</pre> 
 </div> 
 <p>Creates a new TCPNIOTransport instance using the SameThreadIOStrategy, and tcp-no-delay set to true. Note that configuration calls can be chained.</p> 
 <div class="source"> 
  <pre>final TCPNIOTransportBuilder builder = TCPNIOTransportBuilder.newInstance();
final ThreadPoolConfig config = builder.getWorkerThreadPoolConfig();
config.setCorePoolSize(5).setMaxPoolSize(5).setQueueLimit(-1);
final TCPNIOTransport transport = builder.build();
</pre> 
 </div> 
 <p>This example will configure the TCPNIOTransport to use the FixedThreadPool implementation due to the fact that there is no queue limit and the core and max pool sizes are the same.</p> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="index.html" title="Home">Home</a>
						</li>
						<li >
							<a href="license.html" title="License">License</a>
						</li>
						<li >
							<a href="using.html" title="Who's Using Grizzly">Who's Using Grizzly</a>
						</li>
						<li class="nav-header">Download</li>
						<li >
							<a href="dependencies.html" title="Download">Download</a>
						</li>
					</ul>
				</div>
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li >
							<a href="contribute.html" title="Contribute">Contribute</a>
						</li>
						<li >
							<a href="http://stackoverflow.com/questions/tagged/grizzly" title="StackOverflow" class="externalLink">StackOverflow</a>
						</li>
						<li >
							<a href="mailing.html" title="Mailing Lists">Mailing Lists</a>
						</li>
					</ul>
				</div>
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
				<div class="span0 bottom-description">
					<blockquote><div id="archive-footer" style="left: 0px;">This project is now part of the <a href="https://projects.eclipse.org/projects/ee4j">Jakarta EE Working Group</a> and has been transferred to the Eclipse Foundation.<br/>Please visit <a href="https://projects.eclipse.org/projects/ee4j.grizzly">Eclipse Grizzly</a> for all the latest developments (or the new <a href="https://github.com/eclipse-ee4j/grizzly">GitHub Repo</a>).
		</div>
						<p>
                        <a href="http://www.jetbrains.com/idea/" style="position: relative;display:block; width:120px; height:30px; border:0; margin:0;padding:0;text-decoration:none;text-indent:0;"><span style="margin: 0;padding: 0;position: absolute;top: -1px;left: 29px;font-size: 9px;cursor:pointer;  background-image:none;border:0;color: #acc4f9; font-family: trebuchet ms,arial,sans-serif;font-weight: normal;text-align:left;"></span><img src="images/logo-text.png" alt="The best Java IDE" border="0"/></a>
                        </p></blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2013-2021. All Rights Reserved.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="https://javaee.github.io/grizzly//js/lightbox.min.js"></script>
	<script src="https://javaee.github.io/grizzly//js/reflow-scroll.js"></script>
	<script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="https://javaee.github.io/grizzly//js/reflow-skin.js"></script>

	</body>
</html>

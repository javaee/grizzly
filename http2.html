
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2017-07-24
 Rendered using Maven Reflow Skin 1.0.0 (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Project Grizzly - HTTP/2 Overview</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="//netdna.bootstrapcdn.com/bootswatch/2.2.2/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/bootswatch.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/reflow-skin.css" rel="stylesheet" />
		
		<link href="//yandex.st/highlightjs/7.3/styles/solarized_dark.min.css" rel="stylesheet" />
		
		<link href="https://javaee.github.io/grizzly//css/lightbox.css" rel="stylesheet" />
		
		<link href="https://javaee.github.io/grizzly//css/site.css" rel="stylesheet" />
		<link href="https://javaee.github.io/grizzly//css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

	</head>

	<body class="page-http2 project-site" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html">Project <span class="color-brown">Grizzly</span></a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Download <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="dependencies.html" title="Download">Download </a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="overview.html" title="Overview">Overview </a></li>
									<li><a href="dependencies.html" title="Dependencies">Dependencies </a></li>
									<li class="dropdown-submenu">
										<a href="hack" title="Core Framework">Core Framework </a>
										<ul class="dropdown-menu">
											<li><a href="memory.html" title="Memory Management">Memory Management </a></li>
											<li><a href="iostrategies.html" title="I/O Strategies">I/O Strategies </a></li>
											<li><a href="transportsconnections.html" title="Transports and Connections">Transports and Connections </a></li>
											<li><a href="filterchainfilters.html" title="FilterChain and Filters">FilterChain and Filters </a></li>
											<li><a href="coreconfig.html" title="Core configuration">Core configuration </a></li>
											<li><a href="portunification.html" title="Port Unification">Port Unification </a></li>
											<li><a href="monitoring.html" title="Monitoring">Monitoring </a></li>
											<li><a href="extras.html" title="Extras">Extras </a></li>
											<li><a href="bestpractices.html" title="Best Practices">Best Practices </a></li>
											<li><a href="quickstart.html" title="Quick Start">Quick Start </a></li>
											<li><a href="samples.html" title="Samples">Samples </a></li>
										</ul>
									</li>
									<li class="dropdown-submenu">
										<a href="hack" title="HTTP">HTTP </a>
										<ul class="dropdown-menu">
											<li><a href="httpframework.html" title="Core HTTP Framework">Core HTTP Framework </a></li>
											<li><a href="httpserverframework.html" title="HTTP Server Framework">HTTP Server Framework </a></li>
											<li class="active"><a href="" title="HTTP/2">HTTP/2 </a></li>
											<li><a href="httpserverframeworkextras.html" title="HTTP Server Framework Extras">HTTP Server Framework Extras </a></li>
											<li><a href="comet.html" title="Comet">Comet </a></li>
											<li><a href="jaxws.html" title="JAXWS">JAXWS </a></li>
											<li><a href="websockets.html" title="WebSockets">WebSockets </a></li>
											<li><a href="ajp.html" title="AJP">AJP </a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
	<header class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="index.html" id="bannerLeft"><h1><img src="images/grizzlyHead.png"/>&nbsp;<span class="color-black">Project</span> Grizzly</h1></a>
					<p class="lead">NIO Event Development Simplified</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
		<div>
			<ul class="breadcrumb">
				<li class="publishDate version-date">Last Published: 2017-07-24</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<ul id="toc" class="nav">
						<li class="toplevel"><a href="#HTTP2_Overview" title="HTTP/2 Overview">HTTP/2 Overview</a></li>
						<li class="toplevel"><a href="#How_it_works" title="How it works">How it works</a></li>
						<li class="toplevel"><a href="#HTTP2_Server_Push" title="HTTP/2 Server Push">HTTP/2 Server Push</a></li>
					</ul>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="HTTP2_Overview">HTTP/2 Overview</h2>
 </div> 
 <p>Starting with 2.4.0, Grizzly offers support for HTTP/2. The goal of HTTP/2 is to reduce web page load time. This is achieved by prioritizing and multiplexing the transfer of web page resources so that only one connection per client is required.</p> 
 <div class="section"> 
  <h3 id="How_it_works">How it works</h3> 
  <p>The HTTP/2 protocol implementation is represented, at least in the server case, a Filter that sits between the HTTP/1.1 Filter and the HTTP server filter. All the Filters upstream to HTTP/2 filter receive HTTP messages for processing, so they are not even aware of HTTP/2 protocol.</p> 
  <p>Grizzly supports HTTP/2 over plain text and TLS. However, to support HTTP/2 over TLS, you will be required to include a special library on the JVM’s bootclasspath to override the default SSL/TLS handshake implementation with support for Application-Layer Protocol Negotiation Extension. (see <a class="externalLink" href="https://tools.ietf.org/html/rfc7540#section-3.3">https://tools.ietf.org/html/rfc7540#section-3.3</a> for details on ALPN). Because this requires modifying internal JDK classes, the ALPN implementation is sensitive to version of the Oracle JDK that’s being used. As such, the current Grizzly ALPN implementation requires JDK 1.8.0_(121,131,141). Later versions of JDK8 <i>may</i> work, but if the classes change in a significant way, it will result in a runtime issue.</p> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <caption>
     Application-Level Protocol Negotiation JARs 
   </caption> 
   <thead> 
    <tr class="header"> 
     <th align="left">Dependency</th> 
     <th align="left">Description</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="odd"> 
     <td align="left"><a class="externalLink" href="http://search.maven.org/remotecontent?filepath=org/glassfish/grizzly/grizzly-npn-api/1.7/grizzly-npn-api-1.7.jar">grizzly-npn-api-1.7.jar</a></td> 
     <td align="left">This JAR exposes the Grizzly-side of the ALPN API. Typically won't be needed by developers unless they wish to expose custom protocols via ALPN.</td> 
    </tr> 
    <tr class="even"> 
     <td align="left"><a class="externalLink" href="http://search.maven.org/remotecontent?filepath=org/glassfish/grizzly/grizzly-npn-bootstrap/1.7/grizzly-npn-bootstrap-1.7.jar">grizzly-npn-bootstrap-1.7.jar</a></td> 
     <td align="left">Includes both the ALPN API and the SSL implementation overrides. This JAR must be specified on the bootclasspath (-Xbootclasspath/p:&lt;path_to_and_including_grizzly-npn-bootstrap-1.7.jar&gt;) in order for ALPN to function.</td> 
    </tr> 
    <tr class="odd"> 
     <td align="left"><a class="externalLink" href="http://search.maven.org/remotecontent?filepath=org/glassfish/grizzly/grizzly-npn-osgi/1.7/grizzly-npn-osgi-1.7.jar">grizzly-npn-osgi-1.7.jar</a></td> 
     <td align="left">This JAR is an OSGi bundle fragment. It's used to ensure the ALPN API classes are properly available to an OSGi runtime.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>In order to simplify HttpServer HTTP/2 configuration, there is a HTTP/2AddOn available, which may be registered on the required HttpServer’s NetworkListener like:</p> 
  <div class="source"> 
   <pre>HttpServer httpServer = new HttpServer();
NetworkListener listener =
         new NetworkListener(&quot;grizzly&quot;,
                             NetworkListener.DEFAULT_NETWORK_HOST,
                             PORT);
listener.setSecure(true);

// Include environmental specific SSL configuration.
listener.setSSLEngineConfig(...);

// Create default HTTP/2 configuration and provide it to the AddOn
Http2Configuration configuration = Http2Configuration.builder().build();
Http2AddOn http2Addon = new Http2AddOn(configuration); 

// Register the Addon.
listener.registerAddOn(http2Addon);

httpServer.addListener(listener);
</pre> 
  </div> 
  <p>The Http2Configuration class provides the following properties:</p> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <caption>
     Http2Configuration Properties 
   </caption> 
   <tbody> 
    <tr class="odd"> 
     <td align="left">maxConcurrentStreams</td> 
     <td align="left">Configures how many streams may be multiplexed over a single connection. The default is 100.</td> 
    </tr> 
    <tr class="even"> 
     <td align="left">initialWindowSize</td> 
     <td align="left">Configures how much memory, in bytes, each stream will consume on the server side. The default is 64KB.</td> 
    </tr> 
    <tr class="odd"> 
     <td align="left">maxFramePayLoadSize</td> 
     <td align="left">Configures the upper bound, in bytes, on allowable frame sizes. Frames above this bound will be rejected. If not explicitly configured, the default will be the largest allowed by the RFC.</td> 
    </tr> 
    <tr class="even"> 
     <td align="left">maxHeaderListSize</td> 
     <td align="left">Configures the maximum size, in bytes, of the headers. The default is 4096.</td> 
    </tr> 
    <tr class="odd"> 
     <td align="left">disableCipherCheck</td> 
     <td align="left">The HTTP/2 RFC defines a set of cipher suites that shouldn't be allowed to be used to establish a secure connection. Set this to true to disable this security protection.</td> 
    </tr> 
    <tr class="even"> 
     <td align="left">priorKnowledge</td> 
     <td align="left">This property is relevant to the client only. It connects directly to a server using special magic instead of using the HTTP upgrade mechanism. Only use this if the target server is known to support HTTP/2.</td> 
    </tr> 
    <tr class="odd"> 
     <td align="left">threadPoolConfig</td> 
     <td align="left">If specified, a new thread pool will be created to process HTTP streams and push requests.</td> 
    </tr> 
    <tr class="even"> 
     <td align="left">executorService</td> 
     <td align="left">Provide an existing ExecutorService for processing HTTP/2 streams and push requests.</td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 
 <div class="section"> 
  <h3 id="HTTP2_Server_Push">HTTP/2 Server Push</h3> 
  <p>Starting with 2.4.0, Grizzly offers support for HTTP/2 server push mechanism <a class="externalLink" href="https://tools.ietf.org/html/rfc7540#section-8.2">https://tools.ietf.org/html/rfc7540#section-8.2</a>.</p> 
  <blockquote> 
   <p>Quote:<br />HTTP/2 allows a server to pre-emptively send (or “push”) responses (along with corresponding “promised” requests) to a client in association with a previous client-initiated request. This can be useful when the server knows the client will need to have those responses available in order to fully process the response to the original request.</p> 
  </blockquote> 
  <p>To support this feature, we’ve provided an API similar to the PushBuilder defined in Servlet 4.0. This mechanism allows the developer to issue a push for an existing static or dynamic resource.</p> 
  <p>Consider the following example:</p> 
  <div class="source"> 
   <pre>final HttpHandler mainHandler = new HttpHandler() {
    @Override
    public void service(final Request request, final Response response) throws Exception {
        final PushBuilder builder = request.newPushBuilder();
        builder.path(&quot;/resource1&quot;);
        builder.push();
        builder.path(&quot;/resource2&quot;);
        builder.push();
        response.setCharacterEncoding(&quot;UTF-8&quot;);
        response.setContentType(&quot;text/plain&quot;);
        response.getWriter().write(&quot;main&quot;);
    }
};

final HttpHandler resource1 = new HttpHandler() {
    @Override
    public void service(final Request request, final Response response) throws Exception {
        response.setCharacterEncoding(&quot;UTF-8&quot;);
        response.setContentType(&quot;text/plain&quot;);
        response.getWriter().write(&quot;resource1&quot;);
    }
};

final HttpHandler resource2 = new HttpHandler() {
    @Override
    public void service(final Request request, final Response response) throws Exception {
        response.setCharacterEncoding(&quot;UTF-8&quot;);
        response.setContentType(&quot;text/plain&quot;);
        response.getWriter().write(&quot;resource2&quot;);
    }
};
</pre> 
  </div> 
  <p>In the example above, three _HttpHandler_s are defined. The first, <i>mainHandler</i>, pushes two resources to the client prior to sending its own response (NOTE: the <i>push()</i> calls do not block). The runtime will send the HTTP/2 PUSH_PROMISE frame to the peer and then dispatch the request back through the FilterChain for normal request/response processing.</p> 
  <p>The PushBuilder provides several APIs for generating conditional requests so that content isn’t needlessly pushed to the peer.</p> 
  <p>Care should be taken that the call to <i>Request.newPushBuilder()</i> will return null if HTTP/2 push has been disabled for this session.</p> 
  <p>See the <i>org.glassfish.grizzly.http.server.http2.PushBuilder</i> javadocs for more details on what features it provides.</p> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li>
							<a href="index.html" title="Home">Home </a>
						</li>
						<li>
							<a href="license.html" title="License">License </a>
						</li>
						<li>
							<a href="using.html" title="Who's Using Grizzly">Who's Using Grizzly </a>
						</li>
						<li class="nav-header">Download</li>
						<li>
							<a href="dependencies.html" title="Download">Download </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li>
							<a href="contribute.html" title="Contribute">Contribute </a>
						</li>
						<li>
							<a href="http://stackoverflow.com/questions/tagged/grizzly" title="StackOverflow" class="externalLink">StackOverflow </a>
						</li>
						<li>
							<a href="https://twitter.com/project_grizzly" title="Twitter" class="externalLink">Twitter </a>
						</li>
						<li>
							<a href="mailing.html" title="Mailing Lists">Mailing Lists </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017. All Rights Reserved.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='https://javaee.github.io/grizzly//js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
	<script src="https://javaee.github.io/grizzly//js/lightbox.js"></script>
	<script src="https://javaee.github.io/grizzly//js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="https://javaee.github.io/grizzly//js/jquery.ba-bbq.min.js"></script>
	<script src="//yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="https://javaee.github.io/grizzly//js/reflow-skin.js"></script>
	
	</body>
</html>
